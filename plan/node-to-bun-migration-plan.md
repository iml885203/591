# ğŸ¯ Node.js â†’ Bun é·ç§»è¨ˆåŠƒ

## ğŸ“Š **ç•¶å‰å°ˆæ¡ˆçµæ§‹åˆ†æ**

### éœ€è¦æ•´ç†çš„æ ¹ç›®éŒ„æª”æ¡ˆï¼š
```
ğŸ“ 591-crawler/
â”œâ”€â”€ ğŸ§ª test-api.js               # API æ¸¬è©¦è…³æœ¬
â”œâ”€â”€ ğŸ§ª test_discord_format.js    # Discord æ ¼å¼æ¸¬è©¦
â”œâ”€â”€ ğŸ§ª test_url_analysis.js      # URL åˆ†ææ¸¬è©¦
â”œâ”€â”€ ğŸ§ª test_user_agents.js       # User Agent æ¸¬è©¦
â”œâ”€â”€ ğŸ“„ current_591.html          # ç•¶å‰ç¶²é ç¯„ä¾‹
â”œâ”€â”€ ğŸ“„ sample_591.html           # ç¯„ä¾‹ç¶²é 
â”œâ”€â”€ ğŸ–¼ï¸ 591_avatar.png           # å°ˆæ¡ˆåœ–ç¤º
â””â”€â”€ ğŸ“ coverage/                 # æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
```

---

## ğŸ—‚ï¸ **ç¬¬ä¸€éšæ®µï¼šç›®éŒ„é‡æ§‹**

### å»ºè­°çš„æ–°ç›®éŒ„çµæ§‹ï¼š
```
ğŸ“ 591-crawler/
â”œâ”€â”€ ğŸ“ dev/                     # é–‹ç™¼å·¥å…· (æ–°å¢)
â”‚   â”œâ”€â”€ test-api.js
â”‚   â”œâ”€â”€ test_discord_format.js
â”‚   â”œâ”€â”€ test_url_analysis.js
â”‚   â””â”€â”€ test_user_agents.js
â”œâ”€â”€ ğŸ“ samples/                 # ç¯„ä¾‹æª”æ¡ˆ (æ–°å¢)
â”‚   â”œâ”€â”€ current_591.html
â”‚   â””â”€â”€ sample_591.html
â”œâ”€â”€ ğŸ“ assets/                  # éœæ…‹è³‡æº (æ–°å¢)
â”‚   â””â”€â”€ 591_avatar.png
â”œâ”€â”€ ğŸ“ .coverage/               # éš±è—è¦†è“‹ç‡å ±å‘Š
â””â”€â”€ [ç¾æœ‰çµæ§‹ä¿æŒä¸è®Š]
```

---

## ğŸš€ **ç¬¬äºŒéšæ®µï¼šBun é·ç§»è¨ˆåŠƒ**

### **2.1 Runtime é·ç§»**
- [ ] **åˆ†æç›¸å®¹æ€§**: æª¢æŸ¥æ‰€æœ‰ä¾è³´æ˜¯å¦æ”¯æ´ Bun
- [ ] **æ›´æ–° package.json**: 
  - ç§»é™¤ `"preinstall": "npx only-allow pnpm"`
  - æ›´æ–° scripts å¾ `pnpm` â†’ `bun`
  - æª¢æŸ¥ `packageManager` æ¬„ä½
- [ ] **é–å®šæª”æ¡ˆ**: `pnpm-lock.yaml` â†’ `bun.lockb`

### **2.2 ä¾è³´ç›¸å®¹æ€§æª¢æŸ¥**
- [ ] **æ ¸å¿ƒä¾è³´** (æ‡‰è©²å®Œå…¨ç›¸å®¹):
  - âœ… axios, cheerio, dotenv, express
  - âœ… swagger-jsdoc, swagger-ui-express, fs-extra
- [ ] **æ¸¬è©¦ç›¸é—œ** (éœ€è¦é©—è­‰):
  - âš ï¸ Jest â†’ è€ƒæ…®ä½¿ç”¨ Bun å…§å»ºæ¸¬è©¦å™¨
  - âš ï¸ supertest, nock â†’ éœ€è¦ç›¸å®¹æ€§æ¸¬è©¦

### **2.3 é…ç½®æ–‡ä»¶æ›´æ–°**
- [ ] **Jest é…ç½®**: 
  - é¸é …A: ä¿æŒ Jest (å¦‚æœç›¸å®¹)
  - é¸é …B: é·ç§»åˆ° `bun test`
- [ ] **Docker é…ç½®**:
  - åŸºç¤æ˜ åƒ: `node:18-alpine` â†’ `oven/bun:alpine`
  - å®‰è£å‘½ä»¤: `pnpm install` â†’ `bun install`
  - é‹è¡Œå‘½ä»¤: `npm run api` â†’ `bun run api`

---

## âš¡ **ç¬¬ä¸‰éšæ®µï¼šæ€§èƒ½å„ªåŒ–æ©Ÿæœƒ**

### **3.1 Bun åŸç”ŸåŠŸèƒ½åˆ©ç”¨**
- [ ] **å…§å»º SQLite**: è€ƒæ…®æ›¿æ› JSON æ–‡ä»¶å­˜å„²
- [ ] **å…§å»º HTTP**: è©•ä¼°æ˜¯å¦éœ€è¦ Express
- [ ] **å…§å»ºæ¸¬è©¦**: ç°¡åŒ–æ¸¬è©¦é…ç½®
- [ ] **å…§å»º TypeScript**: è€ƒæ…®é€æ­¥é·ç§»åˆ° TS

### **3.2 æ€§èƒ½æå‡é æœŸ**
- [ ] **å•Ÿå‹•é€Ÿåº¦**: ~3x æ›´å¿«çš„å•Ÿå‹•æ™‚é–“
- [ ] **å®‰è£é€Ÿåº¦**: ~10x æ›´å¿«çš„ä¾è³´å®‰è£
- [ ] **ç†±é‡è¼‰**: æ›´å¥½çš„é–‹ç™¼é«”é©—
- [ ] **è¨˜æ†¶é«”ä½¿ç”¨**: æ›´ä½çš„è¨˜æ†¶é«”å ç”¨

---

## ğŸ› ï¸ **ç¬¬å››éšæ®µï¼šå¯¦æ–½æ­¥é©Ÿ**

### **éšæ®µ 4.1: æº–å‚™å·¥ä½œ**
1. å‰µå»º `dev/` å’Œ `samples/` ç›®éŒ„
2. ç§»å‹•æ¸¬è©¦è…³æœ¬å’Œç¯„ä¾‹æª”æ¡ˆ
3. æ›´æ–° `.gitignore` åŒ…å« `bun.lockb`
4. å‚™ä»½ç¾æœ‰ `pnpm-lock.yaml`

### **éšæ®µ 4.2: Bun å®‰è£èˆ‡æ¸¬è©¦**
1. æœ¬åœ°å®‰è£ Bun runtime
2. æ¸¬è©¦ `bun install` ä¾è³´å®‰è£
3. æ¸¬è©¦ `bun run` è…³æœ¬åŸ·è¡Œ
4. é©—è­‰æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

### **éšæ®µ 4.3: é…ç½®æ›´æ–°**
1. æ›´æ–° `package.json` scripts
2. æ›´æ–° Docker é…ç½®
3. æ›´æ–° CI/CD é…ç½® (å¦‚æœæœ‰)
4. æ›´æ–°æ–‡æª”ä¸­çš„å®‰è£æŒ‡ä»¤

### **éšæ®µ 4.4: æ¸¬è©¦èˆ‡é©—è­‰**
1. é‹è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶
2. æ¸¬è©¦ API ç«¯é»åŠŸèƒ½
3. æ¸¬è©¦ Docker å®¹å™¨å»ºæ§‹
4. æ€§èƒ½åŸºæº–æ¸¬è©¦

---

## âš ï¸ **é¢¨éšªè©•ä¼°èˆ‡å›é€€è¨ˆåŠƒ**

### **æ½›åœ¨é¢¨éšª**
- ğŸ”´ **ä¾è³´ç›¸å®¹æ€§**: æŸäº› npm å¥—ä»¶å¯èƒ½ä¸å®Œå…¨ç›¸å®¹
- ğŸŸ¡ **Jest æ•´åˆ**: å¯èƒ½éœ€è¦é¡å¤–é…ç½®
- ğŸŸ¡ **Docker æ˜ åƒå¤§å°**: Bun æ˜ åƒå¯èƒ½è¼ƒå¤§
- ğŸŸ¢ **å­¸ç¿’æ›²ç·š**: åœ˜éšŠéœ€è¦ç†Ÿæ‚‰ Bun ç‰¹æ€§

### **å›é€€ç­–ç•¥**
- ä¿ç•™åŸå§‹ `pnpm-lock.yaml` æ–‡ä»¶
- Git åˆ†æ”¯ç­–ç•¥: `feature/bun-migration`
- æº–å‚™å›é€€åˆ° Node.js + pnpm çš„è…³æœ¬

---

## ğŸ“ˆ **é æœŸæ•ˆç›Š**

### **é–‹ç™¼é«”é©—**
- âš¡ **æ›´å¿«çš„é–‹ç™¼é€±æœŸ** (å®‰è£ + å•Ÿå‹• + ç†±é‡è¼‰)
- ğŸ”§ **ç°¡åŒ–çš„å·¥å…·éˆ** (å…§å»ºæ›´å¤šåŠŸèƒ½)
- ğŸ“¦ **æ›´å°çš„ node_modules** (æ›´å¥½çš„å¥—ä»¶è§£æ)

### **ç”Ÿç”¢ç’°å¢ƒ**
- ğŸš€ **æ›´å¿«çš„å®¹å™¨å•Ÿå‹•** (å†·å•Ÿå‹•å„ªåŒ–)
- ğŸ’¾ **æ›´ä½çš„è¨˜æ†¶é«”å ç”¨** (ç‰¹åˆ¥åœ¨ Docker ä¸­)
- ğŸ”’ **æ›´å¥½çš„å®‰å…¨æ€§** (ç¾ä»£ runtime)

---

## ğŸ“‹ **é·ç§»æª¢æŸ¥æ¸…å–®**

- [ ] ç›®éŒ„é‡æ§‹å®Œæˆ
- [ ] Bun runtime æœ¬åœ°æ¸¬è©¦é€šé
- [ ] æ‰€æœ‰ä¾è³´ç›¸å®¹æ€§ç¢ºèª
- [ ] æ¸¬è©¦å¥—ä»¶åœ¨ Bun ä¸‹æ­£å¸¸é‹è¡Œ
- [ ] Docker é…ç½®æ›´æ–°ä¸¦æ¸¬è©¦
- [ ] æ–‡æª”æ›´æ–° (README, CLAUDE.md)
- [ ] æ€§èƒ½åŸºæº–æ¸¬è©¦å®Œæˆ
- [ ] åœ˜éšŠåŸ¹è¨“èˆ‡çŸ¥è­˜è½‰ç§»

**é ä¼°æ™‚é–“**: 2-3 å€‹å·¥ä½œå¤© (åŒ…å«æ¸¬è©¦èˆ‡é©—è­‰)

---

## ğŸ“š **åƒè€ƒè³‡æº**

### **Bun å®˜æ–¹æ–‡æª”**
- [Bun Runtime API](https://bun.sh/docs/api)
- [Bun Package Manager](https://bun.sh/docs/cli/install)
- [Bun Test Runner](https://bun.sh/docs/cli/test)
- [Node.js Compatibility](https://bun.sh/docs/runtime/nodejs-apis)

### **é·ç§»æŒ‡å—**
- [Express.js with Bun](https://bun.sh/guides/ecosystem/express)
- [Jest to Bun Test Migration](https://bun.sh/docs/cli/test#jest)
- [Docker with Bun](https://bun.sh/guides/ecosystem/docker)

### **ç¤¾ç¾¤è³‡æº**
- [Bun Discord Community](https://bun.sh/discord)
- [Awesome Bun](https://github.com/apvarun/awesome-bun)
- [Bun Examples Repository](https://github.com/oven-sh/bun/tree/main/examples)